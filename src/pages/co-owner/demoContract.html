<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <title>Hợp đồng</title>
  <style>
    body {
      background-color: #f7f9fb;
      font-family: "Times New Roman", Times, serif;
      color: #2c3e50;
      margin: 0;
      padding: 0;
    }

    .contract-container {
      max-width: 850px;
      margin: 2rem auto;
      padding: 2.5rem 3rem;
      background: #ffffff;
      border-radius: 16px;
      box-shadow: 0 4px 14px rgba(0, 0, 0, 0.08);
    }

    /* Tiêu đề chính */
    .contract-title {
      text-align: center;
      font-size: 1.8rem;
      font-weight: bold;
      text-transform: uppercase;
      color: #1a237e;
      letter-spacing: 1px;
      margin-bottom: 0.8rem;
    }

    .contract-subtitle {
      text-align: center;
      color: #555;
      margin-bottom: 2rem;
      font-style: italic;
    }

    /* Tiêu đề điều khoản */
    section {
      margin-bottom: 2.2rem;
      padding-bottom: 1.2rem;
      border-bottom: 1px dashed #d0d0d0;
    }

    section:last-of-type {
      border-bottom: none;
    }

    h2 {
      font-size: 1.25rem;
      font-weight: bold;
      margin-bottom: 0.8rem;
      color: #0d47a1;
      background: linear-gradient(to right, #e3f2fd, #fff);
      border-left: 6px solid #1976d2;
      padding: 0.5rem 0.8rem;
      border-radius: 6px;
      box-shadow: 0 1px 3px rgba(25, 118, 210, 0.1);
    }

    h3 {
      color: #333;
      font-size: 1.05rem;
      margin-top: 1rem;
      font-weight: 600;
    }

    p {
      margin: 0.4rem 0;
      text-align: justify;
    }

    /* Khối nội dung điều khoản */
    .content-box {
      background: #fafafa;
      border-radius: 10px;
      padding: 1rem 1.2rem;
      border: 1px solid #e0e0e0;
    }

    /* Phần con trong mỗi điều */
    .sub-section {
      margin-top: 0.6rem;
      padding-left: 1rem;
    }

    /* Phần chữ ký / xác nhận */
    .signature-block {
      border-top: 2px dashed #ccc;
      padding-top: 1.5rem;
      margin-top: 2rem;
      text-align: center;
    }

    .signature-title {
      font-weight: bold;
      color: #0d47a1;
    }

    .signature-area {
      margin-top: 1rem;
      background: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1.2rem;
    }

    /* Nhấn mạnh các từ khóa */
    strong,
    b {
      color: #1a237e;
    }

    /* Hiệu ứng hover nhẹ (nếu xem online) */
    section:hover {
      background-color: #fafcff;
      transition: background 0.3s ease;
    }
  </style>


</head>

<body>
  <div style="
        max-width: 800px;
        margin: 2rem auto;
        padding: 2rem;
        font-family: 'Times New Roman', Times, serif;
        line-height: 1.8;
        color: #333;
        border: 1px solid #ccc;
        border-radius: 8px;
        background-color: #fafafa;
      ">
    <div style="position: relative; margin-bottom: 1rem;">
      <img src="/public/logo.png" alt="Logo" style="
        position: absolute;
        left: 0;
        top: 50%;
        transform: translateY(-50%);
        height: 50px;
        object-fit: contain;
      " />

      <h1 style="
        text-align: center;
        text-transform: uppercase;
        margin: 0;
        margin-left: 50px;
      ">
        THỎA THUẬN ĐỒNG SỞ HỮU XE
      </h1>
    </div>

    <!-- ✅ BÊN A -->
    <section style="margin-bottom: 1.5rem">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem">
        1.Chủ sở hữu chính - Bên A
      </h2>

      <div style="margin-bottom: 1rem">
        <p><strong>Họ tên: </strong> {{ownerInfo.name}}</p>
        <p><strong>Email:</strong> {{ownerInfo.email}}</p>
        <p><strong>CCCD:</strong> {{ownerInfo.idNumber}}</p>
        <p><strong>Tỷ lệ sở hữu:</strong> {{ownerInfo.ownership}}%</p>
      </div>
    </section>

    <!-- ✅ BÊN B -->
    <section style="margin-bottom: 1.5rem">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem">
        2.Các đồng sở hữu khác - Bên B
      </h2>
      <div style="
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 1rem;
        padding-left: 0;
      ">
        <!-- Đồng sở hữu 1 -->
        <div style="
          border: 1px solid #ddd;
          border-radius: 6px;
          padding: 0.8rem;
          background-color: #fff;
        ">
          <p><strong>Tên đồng sở hữu:</strong> Trần Thị B</p>
          <p><strong>Email:</strong> tranthib@example.com</p>
          <p><strong>CCCD:</strong> 098765432109</p>
          <p><strong>Tỷ lệ sở hữu:</strong> 40%</p>
        </div>

        <!-- Đồng sở hữu 2 -->
        <div style="
          border: 1px solid #ddd;
          border-radius: 6px;
          padding: 0.8rem;
          background-color: #fff;
        ">
          <p><strong>Tên đồng sở hữu:</strong> Lê Văn C</p>
          <p><strong>Email:</strong> levanc@example.com</p>
          <p><strong>CCCD:</strong> 077123456789</p>
          <p><strong>Tỷ lệ sở hữu:</strong> 20%</p>
        </div>

        <!-- Đồng sở hữu 3 -->
        <div style="
          border: 1px solid #ddd;
          border-radius: 6px;
          padding: 0.8rem;
          background-color: #fff;
        ">
          <p><strong>Tên đồng sở hữu:</strong> Nguyễn Thị D</p>
          <p><strong>Email:</strong> nguyenthid@example.com</p>
          <p><strong>CCCD:</strong> 055987654321</p>
          <p><strong>Tỷ lệ sở hữu:</strong> 15%</p>
        </div>

        <!-- Đồng sở hữu 4 -->
        <div style="
          border: 1px solid #ddd;
          border-radius: 6px;
          padding: 0.8rem;
          background-color: #fff;
        ">
          <p><strong>Tên đồng sở hữu:</strong> Phạm Văn E</p>
          <p><strong>Email:</strong> phamvane@example.com</p>
          <p><strong>CCCD:</strong> 033112233445</p>
          <p><strong>Tỷ lệ sở hữu:</strong> 25%</p>
        </div>
      </div>
    </section>

    <!-- ✅ Thông tin xe -->
    <section style="margin-bottom: 1.5rem;">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem;">
        3. Thông tin xe sở hữu
      </h2>

      <p><strong>Loại phương tiện:</strong> {{vehicleData.vehicleType}}</p>
      <p><strong>Hãng sản xuất:</strong> {{vehicleData.brand}}</p>
      <p><strong>Model:</strong> {{vehicleData.model}}</p>
      <p><strong>Biển số đăng ký:</strong> {{vehicleData.plateNo}}</p>
      <p><strong>Màu sắc:</strong> {{vehicleData.color}}</p>
      <p><strong>Dung tích pin:</strong> {{vehicleData.batteryCapacity}} kWh</p>
    </section>
    <!-- ✅ Điều khoản hợp đồng -->
    <section style="margin-bottom: 1.5rem;">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem;">
        A. Quyền và nghĩa vụ của các đồng sở hữu (Bên A)
      </h2>

      <div style="margin-top: 0.8rem; padding: 0.8rem; border: 1px solid #e0e0e0; background:#fff;">
        <!-- Điều 1 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 1. Quản lý quyền sở hữu & thành viên</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Mỗi thành viên phải có CCCD/CMND và Giấy phép lái xe hợp lệ trước khi được thêm vào
            nhóm đồng sở hữu.</p>
          <p><strong>b)</strong> Mọi thay đổi về tỷ lệ sở hữu chỉ có hiệu lực khi tất cả các thành viên ký lại
            e-contract.</p>
          <p><strong>c)</strong> Chỉ admin nhóm có quyền thêm, xóa hoặc điều chỉnh tỷ lệ sở hữu của các thành viên.</p>
          <p><strong>d)</strong> Nhóm tối đa 5 thành viên, trong đó tỷ lệ sở hữu tối thiểu cho mỗi thành viên là 15%.
          </p>
        </div>


        <!-- Điều 2 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 2. Đặt lịch & sử dụng xe</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Việc đặt xe tuân theo nguyên tắc “ai đặt trước, ưu tiên trước”. Hệ thống ghi nhận thời
            gian đăng ký để xác định thứ tự ưu tiên.</p>
          <p><strong>b)</strong> Nếu lịch trùng, hệ thống ưu tiên theo thứ tự: (i) tỷ lệ sở hữu cao hơn; (ii) lịch sử sử
            dụng ít hơn; (iii) thời gian đăng ký sớm hơn.</p>
          <p><strong>c)</strong> Mỗi thành viên được sử dụng xe tối đa 14 ngày liên tục (giảm còn 7 ngày trong các dịp
            lễ, Tết).</p>
          <p><strong>d)</strong> Đặt lịch phải được xác nhận ít nhất 2 giờ trước khi sử dụng. Hủy hoặc đến muộn quá 15
            phút không báo trước sẽ bị trừ tối đa 3 giờ quyền sử dụng.</p>
          <p><strong>e)</strong> Nếu một thành viên đặt lịch trùng lặp trên 5 lần/tháng, hệ thống tự động giảm 50% quyền
            ưu tiên trong 30 ngày tiếp theo.</p>
        </div>


        <!-- Điều 3 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 3. Nghĩa vụ tài chính & thanh toán</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Tất cả chi phí chung (bảo dưỡng, sạc, bảo hiểm, thuế, phí đăng kiểm…) được chia theo tỷ
            lệ sở hữu mặc định, trừ khi có thỏa thuận khác.</p>
          <p><strong>b)</strong> Thanh toán thực hiện trực tuyến qua e-wallet hoặc chuyển khoản. Thành viên chậm thanh
            toán sẽ bị phạt 50.000 VNĐ/ngày và tạm khóa quyền đặt lịch sau 15 ngày trễ hạn.</p>
          <p><strong>c)</strong> Mọi khoản chi phí, thanh toán và vi phạm được ghi nhận tự động trên nền tảng EcoShare,
            làm căn cứ khi tính quyền sử dụng hoặc phân chia chi phí sau này.</p>
        </div>


        <!-- Điều 4 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 4. Trách nhiệm bảo quản & xử lý hư hỏng</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Thành viên phải sử dụng xe đúng mục đích, tuân thủ quy định giao thông và hướng dẫn kỹ
            thuật.</p>
          <p><strong>b)</strong> Nếu gây hư hỏng xe do lỗi sử dụng, người đó phải chịu chi phí sửa chữa và bị phạt thêm
            500.000 VNĐ.</p>
          <p><strong>c)</strong> Nghiêm cấm cho thuê lại xe, sử dụng sai mục đích hoặc vi phạm nghiêm trọng khác. Trường
            hợp vi phạm, thành viên bị loại khỏi nhóm và tịch thu toàn bộ tỷ lệ sở hữu.</p>
          <p><strong>d)</strong> Mọi hư hỏng hoặc sự cố phải được báo trong vòng 48 giờ kể từ khi phát sinh để được hỗ
            trợ và xác minh trách nhiệm.</p>
        </div>
      </div>
    </section>

    <section style="margin-bottom: 1.5rem;">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem;">
        B. Giám sát, tranh chấp & xử lý vi phạm
      </h2>

      <div style="margin-top: 0.8rem; padding: 0.8rem; border: 1px solid #e0e0e0; background:#fff;">
        <!-- Điều 5 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 5. Giám sát & ghi nhận hệ thống</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Mọi hoạt động đặt lịch, thanh toán, hủy chuyến hoặc vi phạm đều được hệ thống ghi log
            và không thể chỉnh sửa.</p>
          <p><strong>b)</strong> Lịch sử sử dụng và hành vi vi phạm là căn cứ để đánh giá quyền ưu tiên hoặc xử lý tranh
            chấp.</p>
        </div>
        <!-- Điều 6 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 6. Giải quyết tranh chấp</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Tranh chấp nhỏ giữa các thành viên sẽ được hòa giải qua nền tảng EcoShare với sự hỗ trợ
            của Staff.</p>
          <p><strong>b)</strong> Nếu không đạt thỏa thuận, EcoShare Admin có quyền kiểm tra log, đưa ra quyết định cuối
            cùng có giá trị bắt buộc.</p>
          <p><strong>c)</strong> Mọi kết luận, cảnh cáo, phạt hành chính hoặc khóa quyền sử dụng đều được thông báo
            chính thức qua hệ thống.</p>
        </div>
      </div>
    </section>

    <section style="margin-bottom: 1.5rem;">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem;">
        C. Hiệu lực hợp đồng & chấm dứt
      </h2>

      <div style="margin-top: 0.8rem; padding: 0.8rem; border: 1px solid #e0e0e0; background:#fff;">
        <!-- Điều 7 -->
        <p style="margin: 0 0 0.6rem 0;"><strong>Điều 7. Hiệu lực và chấm dứt</strong></p>
        <div style="margin-left: 1rem; line-height:1.6;">
          <p><strong>a)</strong> Hợp đồng có hiệu lực kể từ ngày các bên ký điện tử và có giá trị vô thời hạn, trừ khi
            được sửa đổi hoặc chấm dứt bằng văn bản.</p>
          <p><strong>b)</strong> Hợp đồng có thể chấm dứt khi: (i) các bên đồng thuận; (ii) một bên vi phạm nghiêm trọng
            và không khắc phục trong 30 ngày; (iii) chuyển nhượng toàn bộ quyền sở hữu.</p>
          <p><strong>c)</strong> Sau khi chấm dứt, mọi nghĩa vụ tài chính và quyền sử dụng xe phải được thanh toán, xác
            nhận và cập nhật trên nền tảng EcoShare.</p>
        </div>
      </div>
    </section>
    <!-- ✅ Xác nhận -->
    <!-- ✅ Phần ký xác nhận -->
    <!-- ✅ Phần xác nhận -->
    <section style="margin-top: 2rem">
      <h2 style="border-bottom: 1px solid #ccc; padding-bottom: 0.3rem">
        5. Xác nhận
      </h2>
      <p>Vui lòng xác nhận đồng ý hoặc không đồng ý với các điều khoản trong hợp đồng:</p>

      <div style="
  border: 1px solid #cfd8dc;
  background: #f9fcff;
  padding: 1rem 1.2rem;
  border-radius: 8px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.05);
">
        <label style="display:block; margin:0.5rem 0; cursor:pointer;">
          <input type="radio" name="agreement" value="1" id="agreeYes" />
          Tôi <strong>đồng ý</strong> với toàn bộ điều khoản
        </label>
        <label style="display:block; margin:0.5rem 0; cursor:pointer;">
          <input type="radio" name="agreement" value="0" id="agreeNo" />
          Tôi <strong>không đồng ý</strong> với các điều khoản
        </label>
      </div>

      <p style="
  margin-top: 1.5rem;
  padding: 0.75rem 1rem;
  background: #e3f2fd;
  border-left: 4px solid #2196f3;
  border-radius: 6px;
  font-size: 1rem;
  color: #0d47a1;
  font-weight: 500;
">
        ⚠️ <strong>Lưu ý:</strong> Khi tick <em>"Đồng ý"</em>, bạn xác nhận đã đọc và chấp thuận tất cả các điều khoản
        nêu trong hợp đồng này.
      </p>

      <!-- ✅ Mục chữ ký private key (ẩn mặc định, xuất hiện khi chọn “Đồng ý”) -->
      <div id="signatureSection" style="
    margin-top: 2rem;
    display: none;
    background: #f9fafb;
    border: 1px solid #cfd8dc;
    border-radius: 10px;
    padding: 1.5rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    max-width: 800px;
  ">
        <h3 style="
      border-bottom: 2px solid #1976d2;
      padding-bottom: 0.5rem;
      color: #0d47a1;
      font-size: 1.25rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    ">
          🔐 6. Xác nhận bằng Private Key
        </h3>

        <p style="margin-top: 0.8rem; font-size: 1rem; color: #333;">
          Vui lòng nhập <strong>Private Key</strong> của bạn để hoàn tất quá trình xác nhận hợp đồng.
        </p>

        <div id="privateKeyContainer" style="margin-top: 1.2rem;">
          <label for="privateKeyArea" style="display:block; margin-bottom:0.5rem; font-weight:500; color:#444;">
            Private Key
          </label>
          <textarea id="privateKeyArea" rows="6" style="
        width: 100%;
        max-width: 700px;
        border: 1.5px solid #90a4ae;
        padding: 0.75rem;
        border-radius: 6px;
        box-sizing: border-box;
        font-family: monospace;
        background: #fff;
        transition: all 0.2s ease;
      " placeholder="Dán private key của bạn tại đây" onfocus="this.style.borderColor='#1976d2'"
            onblur="this.style.borderColor='#90a4ae'"></textarea>

          <div style="
        margin-top: 0.8rem;
        display: flex;
        gap: 0.6rem;
        justify-content: flex-end;
      ">
            <button id="clearKey" type="button" style="
          padding: 0.55rem 1.2rem;
          border: 1px solid #bbb;
          border-radius: 6px;
          background: #fafafa;
          cursor: pointer;
          transition: all 0.2s;
        " onmouseover="this.style.background='#eee'" onmouseout="this.style.background='#fafafa'">
              🧹 Xóa
            </button>

            <button id="saveKey" type="button" style="
          padding: 0.55rem 1.2rem;
          border: none;
          border-radius: 6px;
          background: #1976d2;
          color: white;
          font-weight: 500;
          cursor: pointer;
          transition: all 0.2s;
        " onmouseover="this.style.background='#1565c0'" onmouseout="this.style.background='#1976d2'">
              💾 Lưu
            </button>
          </div>
        </div>

        <div id="signatureResult" style="
      margin-top: 1.8rem;
      display: none;
      background: #e3f2fd;
      border-left: 4px solid #1976d2;
      padding: 1rem;
      border-radius: 6px;
      max-width: 700px;
    ">
          <p style="margin: 0 0 0.4rem 0; font-weight: 600; color: #0d47a1;">
            ✅ Private Key đã được xác nhận
          </p>
          <div style="border: 1px dashed #90caf9; padding: 0.8rem; border-radius: 6px; background: #fff;">
            <p id="maskedKey" style="word-break: break-all; font-family: monospace; margin: 0.3rem 0;"></p>
            <p style="margin: 0.5rem 0 0 0; color: #444;">
              <em>Người xác nhận: {{ownerInfo.name}}</em>
            </p>
          </div>
        </div>
      </div>


      <script>
        (function () {
          // --- PHẦN XỬ LÝ HIỂN THỊ THEO RADIO 5 ---
          const agreeYes = document.getElementById('agreeYes');
          const agreeNo = document.getElementById('agreeNo');
          const signatureSection = document.getElementById('signatureSection');

          agreeYes.addEventListener('change', () => {
            if (agreeYes.checked) {
              signatureSection.style.display = 'block';
            }
          });

          agreeNo.addEventListener('change', () => {
            if (agreeNo.checked) {
              signatureSection.style.display = 'none';
            }
          });

          // --- PHẦN PRIVATE KEY ĐÃ LƯỢC GỌN ---
          const area = document.getElementById('privateKeyArea');
          const clearBtn = document.getElementById('clearKey');
          const saveBtn = document.getElementById('saveKey');
          const resultBox = document.getElementById('signatureResult');
          const maskedKeyP = document.getElementById('maskedKey');

          clearBtn.addEventListener('click', () => {
            area.value = '';
            resultBox.style.display = 'none';
          });

          saveBtn.addEventListener('click', () => {
            const keyValue = area.value.trim();
            if (!keyValue) {
              alert('Vui lòng nhập hoặc dán private key trước khi lưu.');
              return;
            }

            // ✅ Hiển thị nguyên văn, không che
            maskedKeyP.textContent = keyValue;
            resultBox.style.display = 'block';

            saveBtn.textContent = 'Đã lưu';
            setTimeout(() => saveBtn.textContent = 'Lưu', 1500);
          });
        })();
      </script>
    </section>
  </div>
</body>

</html>